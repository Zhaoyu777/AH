{% extends (courseSet.type == 'instant') ? 'courseset-manage/instant-layout.html.twig' : 'courseset-manage/layout.html.twig' %}

{% block title %}{{ '封面图片'|trans }} - {{ parent() }}{% endblock %}
{% set side_nav = 'cover' %}
{% do script(['app/js/courseset-manage/cover-crop/index.js']) %}
{% set token = upload_token('tmp', 'image') %}
{% block main %}

<div class="panel panel-default panel-col">
  <div class="panel-heading">
    {{'封面图片'|trans}}
  </div>

  <div id="courseset-picture-crop-form" class="panel-body">

      <div class="form-group clearfix">
        <div class="col-md-offset-2 col-md-8 controls">
          <img class="img-responsive" src="{{ filepath(pictureUrl) }}"
          id="courseset-picture-crop"
          width="{{scaledSize.width}}" height="{{scaledSize.height}}" data-natural-width="{{ naturalSize.width }}" data-natural-height="{{ naturalSize.height }}" />
          <div class="help-block">{{'提示：请选择图片裁剪区域。'|trans}}</div>
        </div>
      </div>

      <div class="form-group clearfix">
        <div class="col-md-offset-2 col-md-8 controls">
        {% if courseSet.type == 'open' or courseSet.type == 'liveOpen' %}
       {#   <button class="btn btn-fat btn-primary"
          data-url="{{path('open_course_manage_picture_crop', {id: courseSet.id})}}"
          data-goto-url="{{path('open_course_manage_picture',{id: courseSet.id})}}"
          id="upload-picture-btn">{{'保存'|trans}}</button> #}
        {% else %}
         <button class="btn btn-fat btn-primary upload-picture-btn"
          data-url="{{path('course_set_manage_cover_crop', {id: courseSet.id})}}"
          data-goto-url="{{path('course_set_manage_cover',{id: courseSet.id})}}"
          id="upload-picture-btn" data-loading-text="{{'正在保存...'|trans}}">{{'保存'|trans}}</button>
        {% endif %}
          <a href="javascript:;" class="go-back btn btn-link">{{'重新选择图片'|trans}}</a>
        </div>
      </div>
  </div>
</div>

{% endblock %}

